const k={WEB:{path:"/models/gemma-2b-it-q4_k_m.gguf"},MOBILE:{path:"/models/phi-3-mini-4k-instruct-q4.onnx"}},Ke="peer_learning.db";function O(){if(typeof navigator>"u")return"web";const t=navigator.userAgent.toLowerCase();return/android/.test(t)?"android":/iphone|ipad|ipod/.test(t)?"ios":"web"}new Date(Date.now()-1e3*60*60*2).toISOString(),new Date(Date.now()-1e3*60*60*24).toISOString(),new Date(Date.now()-1e3*60*60*48).toISOString();new Date(Date.now()-1e3*60*60*24*5).toISOString(),new Date(Date.now()-1e3*60*60*24*2).toISOString();const Je=[{id:"tutor-1",name:"Priya Sharma",specialty:"Mathematics",rating:4.8,reviews:124,isOnline:!0,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Priya"},{id:"tutor-2",name:"Rahul Verma",specialty:"Science",rating:4.5,reviews:89,isOnline:!1,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Rahul"}],Ge=[{id:"msg-1",senderId:"ai-assistant",text:"Hello Rohan! How can I help you with your studies today?",timestamp:new Date(Date.now()-1e3*60*30).toISOString(),isAi:!0},{id:"msg-2",senderId:"user-1",text:"Can you explain Newton's Third Law?",timestamp:new Date(Date.now()-1e3*60*29).toISOString(),isAi:!1},{id:"msg-3",senderId:"ai-assistant",text:"Certainly! Newton's Third Law states that for every action, there is an equal and opposite reaction. This means that in every interaction, there is a pair of forces acting on the two interacting objects.",timestamp:new Date(Date.now()-1e3*60*28).toISOString(),isAi:!0}];function c(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function N(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function T(t,e){const n=c(t);return isNaN(e)?N(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const b=43200,x=1440;let E={};function H(){return E}function A(t){const e=c(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function S(t,e){const n=c(t),a=c(e),r=n.getTime()-a.getTime();return r<0?-1:r>0?1:r}function W(t){return N(t,Date.now())}function z(t,e){const n=c(t),a=c(e),r=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return r*12+i}function R(t){return e=>{const a=(t?Math[t]:Math.trunc)(e);return a===0?0:a}}function L(t,e){return+c(t)-+c(e)}function _(t){const e=c(t);return e.setHours(23,59,59,999),e}function F(t){const e=c(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function q(t){const e=c(t);return+_(e)==+F(e)}function j(t,e){const n=c(t),a=c(e),r=S(n,a),i=Math.abs(z(n,a));let s;if(i<1)s=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*i);let o=S(n,a)===-r;q(c(t))&&i===1&&S(t,a)===1&&(o=!1),s=r*(i-Number(o))}return s===0?0:s}function $(t,e,n){const a=L(t,e)/1e3;return R(n?.roundingMethod)(a)}const X={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},B=(t,e,n)=>{let a;const r=X[t];return typeof r=="string"?a=r:e===1?a=r.one:a=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function P(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Y={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Q={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},V={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},K={date:P({formats:Y,defaultWidth:"full"}),time:P({formats:Q,defaultWidth:"full"}),dateTime:P({formats:V,defaultWidth:"full"})},J={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},G=(t,e,n,a)=>J[t];function y(t){return(e,n)=>{const a=n?.context?String(n.context):"standalone";let r;if(a==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n?.width?String(n.width):s;r=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n?.width?String(n.width):t.defaultWidth;r=t.values[o]||t.values[s]}const i=t.argumentCallback?t.argumentCallback(e):e;return r[i]}}const U={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Z={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},te={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},re=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ie={ordinalNumber:re,era:y({values:U,defaultWidth:"wide"}),quarter:y({values:Z,defaultWidth:"wide",argumentCallback:t=>t-1}),month:y({values:ee,defaultWidth:"wide"}),day:y({values:te,defaultWidth:"wide"}),dayPeriod:y({values:ne,defaultWidth:"wide",formattingValues:ae,defaultFormattingWidth:"wide"})};function w(t){return(e,n={})=>{const a=n.width,r=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;const s=i[0],o=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(o)?se(o,f=>f.test(s)):oe(o,f=>f.test(s));let l;l=t.valueCallback?t.valueCallback(d):d,l=n.valueCallback?n.valueCallback(l):l;const h=e.slice(s.length);return{value:l,rest:h}}}function oe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function se(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function ce(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const r=a[0],i=e.match(t.parsePattern);if(!i)return null;let s=t.valueCallback?t.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(r.length);return{value:s,rest:o}}}const ue=/^(\d+)(th|st|nd|rd)?/i,le=/\d+/i,de={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},he={any:[/^b/i,/^(a|c)/i]},me={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fe={any:[/1/i,/2/i,/3/i,/4/i]},pe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},we={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},be={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Me={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Se={ordinalNumber:ce({matchPattern:ue,parsePattern:le,valueCallback:t=>parseInt(t,10)}),era:w({matchPatterns:de,defaultMatchWidth:"wide",parsePatterns:he,defaultParseWidth:"any"}),quarter:w({matchPatterns:me,defaultMatchWidth:"wide",parsePatterns:fe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:w({matchPatterns:pe,defaultMatchWidth:"wide",parsePatterns:ge,defaultParseWidth:"any"}),day:w({matchPatterns:ye,defaultMatchWidth:"wide",parsePatterns:we,defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:be,defaultMatchWidth:"any",parsePatterns:Me,defaultParseWidth:"any"})},ve={code:"en-US",formatDistance:B,formatLong:K,formatRelative:G,localize:ie,match:Se,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Pe(t,e,n){const a=H(),r=n?.locale??a.locale??ve,i=2520,s=S(t,e);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:s});let d,l;s>0?(d=c(e),l=c(t)):(d=c(t),l=c(e));const h=$(l,d),f=(A(l)-A(d))/1e3,u=Math.round((h-f)/60);let g;if(u<2)return n?.includeSeconds?h<5?r.formatDistance("lessThanXSeconds",5,o):h<10?r.formatDistance("lessThanXSeconds",10,o):h<20?r.formatDistance("lessThanXSeconds",20,o):h<40?r.formatDistance("halfAMinute",0,o):h<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):u===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",u,o);if(u<45)return r.formatDistance("xMinutes",u,o);if(u<90)return r.formatDistance("aboutXHours",1,o);if(u<x){const p=Math.round(u/60);return r.formatDistance("aboutXHours",p,o)}else{if(u<i)return r.formatDistance("xDays",1,o);if(u<b){const p=Math.round(u/x);return r.formatDistance("xDays",p,o)}else if(u<b*2)return g=Math.round(u/b),r.formatDistance("aboutXMonths",g,o)}if(g=j(l,d),g<12){const p=Math.round(u/b);return r.formatDistance("xMonths",p,o)}else{const p=g%12,v=Math.trunc(g/12);return p<3?r.formatDistance("aboutXYears",v,o):p<9?r.formatDistance("overXYears",v,o):r.formatDistance("almostXYears",v+1,o)}}function Ue(t,e){return Pe(t,W(t),e)}function De(t,e){return T(t,-e)}function xe(t,e){const n=c(t);return n.setHours(e),n}function Ae(t,e){const n=c(t);return n.setMinutes(e),n}const Ie=["Aarav","Arjun","Aditya","Vihaan","Reyansh","Mohammed","Sai","Vivaan","Ayaan","Krishna","Ishaan","Shaurya","Atharv","Pranav","Aarush","Arnav","Kabir","Rudra","Advait","Aadhya","Dhruv","Ansh","Yuvraj","Karthik","Rohan","Aakash","Siddharth","Ravi","Vikram","Arun"],Ce=["Aadhya","Saanvi","Sara","Aaradhya","Pari","Ananya","Diya","Aanya","Isha","Navya","Riya","Kiara","Myra","Prisha","Aditi","Anika","Kavya","Pari","Shanaya","Avni","Priya","Neha","Divya","Sneha","Pooja","Anjali","Meera","Lakshmi","Kaveri","Radha"],ke=["Sharma","Verma","Patel","Kumar","Singh","Das","Jain","Gupta","Reddy","Nair","Rao","Krishna","Iyer","Menon","Pillai","Agarwal","Desai","Shah","Mehta","Kapoor","Malhotra","Chopra","Bansal","Joshi","Mishra","Pandey","Sinha","Khan","Ahmed","Ali"];class m{constructor(e=Date.now()){Object.defineProperty(this,"seed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.seed=e}next(){return this.seed=(this.seed*9301+49297)%233280,this.seed/233280}nextInt(e,n){return Math.floor(this.next()*(n-e+1))+e}choice(e){return e[this.nextInt(0,e.length-1)]}shuffle(e){const n=[...e];for(let a=n.length-1;a>0;a--){const r=this.nextInt(0,a);[n[a],n[r]]=[n[r],n[a]]}return n}}function Ne(t){const e=new m(t),n=e.next()>.5?"male":"female",a=n==="male"?e.choice(Ie):e.choice(Ce),r=e.choice(ke);return{firstName:a,lastName:r,gender:n}}function Oe(t,e,n){const a=new Date().getFullYear(),r=n.toString().padStart(3,"0");return`${a}-${t}-${e}-${r}`}function D(t=0,e){const n=new m(e),a=De(new Date,t);for(;a.getDay()===0||a.getDay()===6;)a.setDate(a.getDate()-1);const r=n.nextInt(9,16),i=n.nextInt(0,59);return Ae(xe(a,r),i)}function Te(t=100,e){const n=new m(e),a=n.next(),r=n.next(),s=65+Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*r)*15;return Math.max(0,Math.min(t,Math.round(s)))}function Ee(t,e){const n=new m(e),a=Math.min(100,t/90*100),r=Math.log(t+1)/Math.log(91)*100,i=(a+r)/2,s=n.nextInt(-10,10);return Math.max(0,Math.min(100,Math.round(i+s)))}function I(t){const e=new m(t),n=e.choice(["98","99","97","96","95","94","93","92","91","90"]),a=e.nextInt(1e7,99999999);return`+91 ${n}${a}`}function He(t,e,n="student.vidyut.org"){return`${t.toLowerCase()}.${e.toLowerCase()}@${n}`}function We(t){const e=new m(t),n=e.nextInt(70,95),a=e.nextInt(-5,5);return Math.max(0,Math.min(100,n+a))}function ze(t){const e=new m(t);return e.next()<.2?e.nextInt(7,30):e.nextInt(1,7)}function Re(t,e){const n=new m(e),a=t*n.nextInt(50,100),r=n.nextInt(-20,20)/100;return Math.round(a*(1+r))}const C={6:["Mathematics","Science","Social Science","English","Hindi"],7:["Mathematics","Science","Social Science","English","Hindi"],8:["Mathematics","Science","Social Science","English","Hindi"],9:["Mathematics","Science","Social Science","English","Hindi"],10:["Mathematics","Science","Social Science","English","Hindi"]},Le={Mathematics:[{title:"Number Systems",estimatedHours:12},{title:"Algebra",estimatedHours:15},{title:"Geometry",estimatedHours:14},{title:"Mensuration",estimatedHours:10},{title:"Data Handling",estimatedHours:8}],Science:[{title:"Physics",estimatedHours:16},{title:"Chemistry",estimatedHours:14},{title:"Biology",estimatedHours:12},{title:"Environmental Science",estimatedHours:6}],"Social Science":[{title:"History",estimatedHours:10},{title:"Geography",estimatedHours:10},{title:"Civics",estimatedHours:8},{title:"Economics",estimatedHours:8}],English:[{title:"Reading Comprehension",estimatedHours:12},{title:"Writing Skills",estimatedHours:10},{title:"Grammar",estimatedHours:8},{title:"Literature",estimatedHours:10}],Hindi:[{title:"à¤ªà¤¾à¤ à¥à¤¯ à¤ªà¥à¤¸à¥à¤¤à¤•",estimatedHours:12},{title:"à¤µà¥à¤¯à¤¾à¤•à¤°à¤£",estimatedHours:10},{title:"à¤²à¥‡à¤–à¤¨ à¤•à¥Œà¤¶à¤²",estimatedHours:8}]},_e=[{id:"first-steps",name:"First Steps",description:"Complete your first lesson",icon:"ðŸŽ¯",criteria:"Complete 1 lesson"},{id:"week-warrior",name:"Week Warrior",description:"Maintain a 7-day streak",icon:"ðŸ”¥",criteria:"7-day streak"},{id:"math-master",name:"Math Master",description:"Master 10 math topics",icon:"ðŸ§®",criteria:"Complete 10 math topics"},{id:"science-explorer",name:"Science Explorer",description:"Complete 20 science topics",icon:"ðŸ”¬",criteria:"Complete 20 science topics"},{id:"helpful-friend",name:"Helpful Friend",description:"Help 5 peers",icon:"ðŸ¤",criteria:"Help 5 students"},{id:"point-collector",name:"Point Collector",description:"Earn 1000 points",icon:"â­",criteria:"Earn 1000 points"},{id:"perfect-score",name:"Perfect Score",description:"Score 100% in a quiz",icon:"ðŸ’¯",criteria:"Score 100% in any quiz"},{id:"early-bird",name:"Early Bird",description:"Submit 5 assignments early",icon:"ðŸŒ…",criteria:"Submit 5 assignments before deadline"}];function Fe(t=50){const e=[],n=["6","7","8","9","10"],a=["A","B","C"];for(let r=0;r<t;r++){const i=1e3+r,s=new m(i),{firstName:o,lastName:d,gender:l}=Ne(i),h=s.choice(n),f=s.choice(a),u=s.nextInt(1,50);e.push({id:`student-${r+1}`,name:`${o} ${d}`,email:He(o,d),rollNumber:Oe(parseInt(h),f,u),class:h,section:f,gender:l,phone:I(i),parentPhone:I(i+1e4),attendance:We(i),totalPoints:Re(s.nextInt(30,180),i),currentStreak:ze(i),joinedDate:D(s.nextInt(30,180),i)})}return e}function qe(t,e){const n=C[t]||C[6],a=[],r=new m(e.charCodeAt(0));return n.forEach((i,s)=>{const o=Le[i]||[],d=o.length,l=r.nextInt(10,90),h=Ee(l,s),f=Math.floor(h/100*d),u=o.reduce((g,p)=>g+p.estimatedHours,0);a.push({id:`course-${i.toLowerCase().replace(/ /g,"-")}-${t}`,title:`Class ${t} ${i}`,subject:i,class:t,description:`NCERT-aligned ${i} course for Class ${t}`,totalModules:d,completedModules:f,progress:h,lastAccessed:D(r.nextInt(0,7),s),estimatedHours:u})}),a}function je(t,e){const n=new m(e.charCodeAt(0));return t.map((a,r)=>({courseId:a.id,courseName:a.title,subject:a.subject,progress:a.progress,quizzesCompleted:Math.floor(a.progress/10),quizzesTotal:10,averageScore:Te(100,r),timeSpent:Math.floor(a.estimatedHours*60*(a.progress/100))+n.nextInt(-20,20),lastActivity:a.lastAccessed}))}function $e(t,e,n){const a=new m(n);return _e.map(r=>{let i=!1,s=0;return r.id==="first-steps "?i=!0:r.id==="week-warrior"?(i=e>=7,s=Math.min(100,e/7*100)):r.id==="point-collector"?(i=t>=1e3,s=Math.min(100,t/1e3*100)):(i=a.next()<.3,s=i?100:a.nextInt(10,80)),{...r,earnedDate:i?D(a.nextInt(7,60),n):null,progress:i?void 0:s}})}const Ze={students:Fe(50),get currentStudent(){return this.students[0]},get currentStudentCourses(){return qe(this.currentStudent.class,this.currentStudent.id)},get currentStudentProgress(){return je(this.currentStudentCourses,this.currentStudent.id)},get currentStudentBadges(){return $e(this.currentStudent.totalPoints,this.currentStudent.currentStreak,1)}};class Xe{constructor(e=k.WEB.path){Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"modelPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelPath=e}async load(){try{console.log(`Loading model from ${this.modelPath}...`),console.log("Model loaded successfully")}catch(e){throw console.error("Failed to load model:",e),e}}async generate(e,n={}){if(!this.context)throw new Error("Model not loaded. Call load() first.");const{maxTokens:a=256,temperature:r=.7,topP:i=.9,stopSequences:s=["</s>",`

`]}=n;try{return console.log("Generating response for prompt:",e.substring(0,50)+"..."),this.simulateResponse(e)}catch(o){throw console.error("Generation failed:",o),o}}async unload(){this.context&&(this.context=null),console.log("Model unloaded")}simulateResponse(e){const n=e.match(/Question: (.+?)(?:\n|$)/),a=n?n[1]:e;return a.toLowerCase().includes("what is")?"Let me explain that concept to you. This is an important topic in your curriculum.":a.toLowerCase().includes("how to")?"Here are the steps to solve this problem: 1) First, understand the question. 2) Identify what you know. 3) Apply the relevant formula or concept.":a.toLowerCase().includes("solve")?"To solve this problem, let's break it down step by step. First, identify the given information, then apply the appropriate method.":"That's a great question! Let me help you understand this better. Can you tell me what you already know about this topic?"}}async function Be(t){const e=new Xe(t);return await e.load(),e}class Ye{constructor(e=k.MOBILE.path){Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"modelPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelPath=e}async load(){try{console.log(`Loading ONNX model from ${this.modelPath}...`),console.log("ONNX model loaded successfully")}catch(e){throw console.error("Failed to load ONNX model:",e),e}}async generate(e,n={}){if(!this.session)throw new Error("Model not loaded. Call load() first.");const{maxTokens:a=256,temperature:r=.7,topP:i=.9,stopSequences:s=["</s>",`

`]}=n;try{return console.log("Generating response with ONNX..."),this.simulateResponse(e)}catch(o){throw console.error("ONNX generation failed:",o),o}}async unload(){this.session&&(this.session=null),console.log("ONNX model unloaded")}simulateResponse(e){const n=e.match(/Question: (.+?)(?:\n|$)/),a=n?n[1]:e;return a.toLowerCase().includes("what is")?"Let me explain that concept to you. This is an important topic in your curriculum.":a.toLowerCase().includes("how to")?"Here are the steps to solve this problem: 1) First, understand the question. 2) Identify what you know. 3) Apply the relevant formula or concept.":a.toLowerCase().includes("solve")?"To solve this problem, let's break it down step by step. First, identify the given information, then apply the appropriate method.":"That's a great question! Let me help you understand this better. Can you tell me what you already know about this topic?"}}async function Qe(t){const e=new Ye(t);return await e.load(),e}class Ve{constructor(){Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1})}async initialize(){if(this.isInitialized)return;const e=O();try{e==="web"?this.model=await Be():this.model=await Qe(),this.isInitialized=!0}catch(n){throw console.error("Failed to initialize AI model:",n),n}}async chat(e,n){await this.ensureInitialized();const a=this.buildChatPrompt(e,n);return await this.model.generate(a,{maxTokens:256,temperature:.7})}async explain(e,n){await this.ensureInitialized();const a=this.buildExplanationPrompt(e,n);return await this.model.generate(a,{maxTokens:512,temperature:.5})}async solveProblem(e,n){await this.ensureInitialized();const a=this.buildProblemSolvingPrompt(e,n);return await this.model.generate(a,{maxTokens:512,temperature:.3})}async generateQuiz(e,n){await this.ensureInitialized();const a=this.buildQuizPrompt(e,n),r=await this.model.generate(a,{maxTokens:512,temperature:.8});return this.parseQuizResponse(r)}async ensureInitialized(){this.isInitialized||await this.initialize()}buildChatPrompt(e,n){let a=`You are a helpful AI tutor for Indian students. Answer questions clearly and simply.

`;return n&&(a+=`Context from textbook:
${n}

`),a+=`Student: ${e}
Tutor:`,a}buildExplanationPrompt(e,n){return`Explain the concept "${e}" to a Class ${n} student in India. Use simple language and examples from daily life.

Explanation:`}buildProblemSolvingPrompt(e,n){return`Solve this ${n} problem step by step:

${e}

Solution:`}buildQuizPrompt(e,n){return`Generate a ${n} difficulty quiz question about "${e}" with 4 multiple choice options. Format: Question, Option A, Option B, Option C, Option D, Correct Answer, Explanation.

Quiz:`}parseQuizResponse(e){const n=e.split(`
`).filter(a=>a.trim());return{question:n[0]||"Sample question",options:n.slice(1,5)||["A","B","C","D"],correctAnswer:n[5]||"A",explanation:n[6]||"Explanation here"}}async destroy(){this.model&&(await this.model.unload(),this.model=null),this.isInitialized=!1}}let M=null;async function et(){return M||(M=new Ve,await M.initialize()),M}export{Ke as D,Je as M,Ge as a,Ze as d,Ue as f,et as g};
